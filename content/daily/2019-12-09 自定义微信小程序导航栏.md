---
title: "自定义微信小程序导航栏"
date: 2019-12-09T10:22:51+08:00
draft: false
---

今天记录一下之前写过的一个微信小程序的自定义导航栏吧！


有的时候因为业务、视觉的需要，我们可能不需要顶部默认的导航栏，而是想要类似全屏的效果。

因为不能对单独的某一个页面进行单独设置，所以这时候我们需要全局设置

```js
"navigationStyle": "custom"
```

这样就会有个问题，你所有的页面都会失去默认导航栏。

当然这个时候我们需求的需要只想对一个页面全屏展示，这个时候我需要改动的地方就很多了。

首先需要自定义一个导航栏，然后对每个页面都加上这个自定义的导航栏进行占位。


### 导航栏填坑

- 我需要对各个机型的高度进行动态适配

    `导航栏的高度` = `标题的高度` + `工具栏（手机时间、电量等）的高度`

    其中一般工具栏的高度可以根据`wx.getSystemInfoSync`中的`statusBarHeight`去获取，所以需要去计算一下title栏的高度

    这个时候我发现了安卓和ios系统，实际上的高度是不一致的。

    根据我实际的操作发现，以下title栏高度均为无刘海屏的数据 iphone: 64,  andriod: 68

    这个时候为了让右边的「胶囊」达到竖直居中的效果，就需要对其区分机型。这也是为什么会调查高度的原因。


- 返回上一级
  
    这个相对来说就很容易了，直接调用`wx.navigateBack`去返回，

- 注意

    页面滑动的时候导航栏是不动的，所以需要fixed定位在顶部

  




